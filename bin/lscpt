#!/usr/bin/env dash
# Author: Daniel Rode
# Name: List Current Process Tree
# Tags: system, processes
# Created: 10 May 2024
# Updated: -


# Description:
# This script should probably be named "List Current Process Parents" or
# "List Current Process Ancestory" to be more accurate, but I kept the LSCPT
# acronym because it sticks in my memory better.


pid="$1"
if [ -z "$1" ]
then
  pid="$PPID"
fi

while true
do
  echo -n "$pid "
  cat /proc/$pid/cmdline
  echo
  [ "$pid" = "1" ] && break
  pid="$(cut -d ' ' -f 4 /proc/$pid/stat)"
done
