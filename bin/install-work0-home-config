#!/usr/bin/env python3
# author: daniel rode
# created: 13 jan 2026
# updated: -


# Install work0 dotfiles


import subprocess as sp
from pathlib import Path


HOME = Path.home()
INS_PATH = HOME / "code/ins/work0_home_config/"


# Install dotfile
rsync_cmd = (
    'rsync',

    # Configure rsync information verbosity and format
    '--verbose',
    # '--stats',
    # '--progress',
    '--human-readable',
    '--itemize-changes',

    # Configure rsync data transfer method
    '--recursive',  # Copy source recursively
    '--perms', '--chmod=D700,F600',  # Set permissions
    '--links',  # Copy symlinks as symlinks
    '--executability',  # Preserve executability
    '--backup',  # Keep backup of existing dest file
    '--mkpath',  # Create destination is it does not exist
    '--ignore-times',  # Copy file again even if size and times match dest  # TODO does not seem to work

    # Set source dest
    str(INS_PATH) + '/',
    str(HOME) + '/',
)
sp.run(rsync_cmd, check=True)
