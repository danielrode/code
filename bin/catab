#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# Author: Daniel Rode
# Name: Cat from A to B
# Tags: text utility
# Created: 25 Mar 2025
# Updated: 01 Apr 2025


# Description: Given text passed to stdin, print line range A through B.


import sys
import subprocess as sp


# Constants
EXE_NAME = sys.argv[0].split('/')[-1]  # This script's filename
HELP_TEXT = f"Usage: {EXE_NAME}  LINE_A_NUM  [LINE_B_NUM]"


# Functions
def print2(*args, **kwargs) -> None:
    print(*args, **kwargs, file=sys.stderr)


# Main
args = sys.argv[1:]
try:
    lineA = int(args[0])
except IndexError:
    print2(HELP_TEXT)
    sys.exit(1)

quit_line = None
try:
    lineB = int(args[1])
    quit_line = lineB + 1
except IndexError:
    lineB = '$'

sed_cmd_part = f"{lineA},{lineB}p"
if quit_line:
    sed_cmd_part += f";{quit_line}q"
sp.run(['sed', '-n', sed_cmd_part], stdin=sys.stdin)
